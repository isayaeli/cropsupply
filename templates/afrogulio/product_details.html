{% extends 'base.html' %}
{% load static %}
{% load mathfilters %}
{% block contents %}
    <!--Hero Section-->
    <div class="hero-section hero-background">
        <h1 class="page-title">Organic Fruits</h1>
    </div>

    <!--Navigation section-->
    <div class="container">
        <nav class="biolife-nav">
            <ul>
                <li class="nav-item"><a href="{% url 'home' %}" class="permal-link">Home</a></li>
                <li class="nav-item"><a href="{% url 'shop' %}" class="permal-link">Shop</a></li>
                <li class="nav-item"><span class="current-page">{{data.title|capfirst}}</span></li>
            </ul>
        </nav>
    </div>

    <div class="page-contain single-product">
        <div class="container">

            <!-- Main content -->
            <div id="main-content" class="main-content">
                
                <!-- summary info -->
                <div class="sumary-product single-layout">
                    <div class="media">
                        <ul class="biolife-carousel slider-for" data-slick='{"arrows":false,"dots":false,"slidesMargin":30,"slidesToShow":1,"slidesToScroll":1,"fade":true,"asNavFor":".slider-nav"}'>
                            <li><img src="{{data.image.url}}" alt="" width="500" height="500"></li>
                            <!-- <li><img src="assets/images/details-product/p02.jpg" alt="" width="500" height="500"></li>
                            <li><img src="assets/images/details-product/p03.jpg" alt="" width="500" height="500"></li>
                            <li><img src="assets/images/details-product/p06.jpg" alt="" width="500" height="500"></li>
                            <li><img src="assets/images/details-product/p07.jpg" alt="" width="500" height="500"></li> -->
                        </ul>
                        <!-- <ul class="biolife-carousel slider-nav" data-slick='{"arrows":false,"dots":false,"centerMode":false,"focusOnSelect":true,"slidesMargin":10,"slidesToShow":4,"slidesToScroll":1,"asNavFor":".slider-for"}'>
                            <li><img src="assets/images/details-product/thumb_p01.jpg" alt="" width="88" height="88"></li>
                            <li><img src="assets/images/details-product/thumb_p02.jpg" alt="" width="88" height="88"></li>
                            <li><img src="assets/images/details-product/thumb_p03.jpg" alt="" width="88" height="88"></li>
                            <li><img src="assets/images/details-product/thumb_p06.jpg" alt="" width="88" height="88"></li>
                            <li><img src="assets/images/details-product/thumb_p07.jpg" alt="" width="88" height="88"></li>
                        </ul> -->
                    </div>
                    <div class="product-attribute">
                        <h3 class="title">{{data.title}}</h3>
                        <div class="rating">
                            <p class="star-rating"><span class="width-80percent"></span></p>
                            <span class="review-count">(04 Reviews)</span>
                            <!-- <span class="qa-text">Q&amp;A</span>
                            <b class="category">By: Natural food</b> -->
                        </div>
                        <!-- <span class="sku">Sku: #76584HH</span> -->
                        <p class="excerpt">{{data.details}}</p>
                        <div class="price">
                            <ins><span class="price-amount"><span class="currencySymbol">Tsh</span> {{data.price}}</span></ins>
                        </div>
                        <div class="shipping-info">
                            <p class="shipping-day">3-Day Shipping</p>
                            <p class="for-today">Pree Pickup Today</p>
                        </div>
                    </div>
                    <div class="action-form">
                       <div id="myqty">
                        {% if mycart != 0 %}
                        <div class="quantity-box" style="width: 100%;">
                            <span class="title">Quantity:</span>
                            <div class="qty-input" style="width: 100%;">
                                <input style="width: 100%;" type="text" name="qty12554" value="{{mycart.quantity}}" data-max_value="20" data-min_value="1" data-step="1">
                                <button style="border: none; background-color: transparent;" id="add" value="{{data.id}}" class="qty-btn btn-up"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                <button style="border: none; background-color: transparent;" id="remove-single" value="{{data.id}}" class="qty-btn btn-down"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                            </div>
                        </div>
                        {% endif %}
                       </div>
                        
                        <div class="buttons">
                            {% if user.is_authenticated %}
                            <button id="add" value="{{data.id}}" style="background-color: #fc9003; width: 100%;" type="submit" class="btn add-to-cart-btn btn-bold">add to cart</button>
                            {% else %}
                            <button style="background-color: #fc9003; width: 100%;" type="submit" class="btn  add-to-cart-btn2 add-to-cart-btn btn-bold">add to cart</button>
                            {% endif %}
                            <p class="pull-row">
                                <a href="#" class="btn wishlist-btn">wishlist</a>
                                <!-- <a href="#" class="btn compare-btn">compare</a> -->
                            </p>
                        </div>
                
                        <div class="social-media">
                            <ul class="social-list">
                                <li><a href="#" class="social-link"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                                <li><a href="#" class="social-link"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                                <li><a href="#" class="social-link"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li>
                                <li><a href="#" class="social-link"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li>
                                <li><a href="#" class="social-link"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                            </ul>
                        </div>
                        <!-- <div class="acepted-payment-methods">
                            <ul class="payment-methods">
                                <li><img src="assets/images/card1.jpg" alt="" width="51" height="36"></li>
                                <li><img src="assets/images/card2.jpg" alt="" width="51" height="36"></li>
                                <li><img src="assets/images/card3.jpg" alt="" width="51" height="36"></li>
                                <li><img src="assets/images/card4.jpg" alt="" width="51" height="36"></li>
                            </ul>
                        </div> -->
                    </div>
                </div>

                <!-- Tab info -->
                <div class="product-tabs single-layout biolife-tab-contain">
                    <div class="tab-head">
                        <ul class="tabs">
                            <li class="tab-element active"><a href="#tab_1st" class="tab-link">Products Descriptions</a></li>
                            <!-- <li class="tab-element" ><a href="#tab_2nd" class="tab-link">Addtional information</a></li> -->
                            <li class="tab-element" ><a href="#tab_3rd" class="tab-link">Shipping & Delivery</a></li>
                            <li class="tab-element" ><a href="#tab_4th" class="tab-link">Customer Reviews <sup>({{all_ratings.count}})</sup></a></li>
                        </ul>
                    </div>
                    <div class="tab-content">
                        <div id="tab_1st" class="tab-contain desc-tab active">
                            <p class="desc">{{data.details}}</p>
                            <div class="desc-expand">
                                <span class="title">Organic Fresh Fruit</span>
                                <ul class="list">
                                    <li>100% real fruit ingredients</li>
                                    <li>100 fresh fruit bags individually wrapped</li>
                                    <li>Blending Eastern & Western traditions, naturally</li>
                                </ul>
                            </div>
                        </div>
                        <!-- <div id="tab_2nd" class="tab-contain addtional-info-tab">
                            <table class="tbl_attributes">
                                <tbody>
                                <tr>
                                    <th>Color</th>
                                    <td><p>Black, Blue, Purple, Red, Yellow</p></td>
                                </tr>
                                <tr>
                                    <th>Size</th>
                                    <td><p>S, M, L</p></td>
                                </tr>
                                </tbody>
                            </table>
                        </div> -->
                        <div id="tab_3rd" class="tab-contain shipping-delivery-tab">
                            <div class="accodition-tab biolife-accodition">
                                <ul class="tabs">
                                    <li class="tab-item">
                                        <span class="title btn-expand">How long will it take to receive my order?</span>
                                        <div class="content">
                                            <p>Orders placed before 3pm eastern time will normally be processed and shipped by the following business day. For orders received after 3pm, they will generally be processed and shipped on the second business day. For example if you place your order after 3pm on Monday the order will ship on Wednesday. Business days do not include Saturday and Sunday and all Holidays. Please allow additional processing time if you order is placed on a weekend or holiday. Once an order is processed, speed of delivery will be determined as follows based on the shipping mode selected:</p>
                                            <div class="desc-expand">
                                                <span class="title">Shipping mode</span>
                                                <ul class="list">
                                                    <li>Standard (in transit 3-5 business days)</li>
                                                    <li>Priority (in transit 2-3 business days)</li>
                                                    <li>Express (in transit 1-2 business days)</li>
                                                    <li>Gift Card Orders are shipped via USPS First Class Mail. First Class mail will be delivered within 8 business days</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="tab-item">
                                        <span class="title btn-expand">How is the shipping cost calculated?</span>
                                        <div class="content">
                                            <p>You will pay a shipping rate based on the weight and size of the order. Large or heavy items may include an oversized handling fee. Total shipping fees are shown in your shopping cart. Please refer to the following shipping table:</p>
                                            <p>Note: Shipping weight calculated in cart may differ from weights listed on product pages due to size and actual weight of the item.</p>
                                        </div>
                                    </li>
                                    <li class="tab-item">
                                        <span class="title btn-expand">Why Didn’t My Order Qualify for FREE shipping?</span>
                                        <div class="content">
                                            <p>We do not deliver to P.O. boxes or military (APO, FPO, PSC) boxes. We deliver to all 50 states plus Puerto Rico. Certain items may be excluded for delivery to Puerto Rico. This will be indicated on the product page.</p>
                                        </div>
                                    </li>
                                    <li class="tab-item">
                                        <span class="title btn-expand">Shipping Restrictions?</span>
                                        <div class="content">
                                            <p>We do not deliver to P.O. boxes or military (APO, FPO, PSC) boxes. We deliver to all 50 states plus Puerto Rico. Certain items may be excluded for delivery to Puerto Rico. This will be indicated on the product page.</p>
                                        </div>
                                    </li>
                                    <li class="tab-item">
                                        <span class="title btn-expand">Undeliverable Packages?</span>
                                        <div class="content">
                                            <p>Occasionally packages are returned to us as undeliverable by the carrier. When the carrier returns an undeliverable package to us, we will cancel the order and refund the purchase price less the shipping charges. Here are a few reasons packages may be returned to us as undeliverable:</p>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div id="tab_4th" class="tab-contain review-tab">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-5 col-md-5 col-sm-6 col-xs-12">
                                        <div class="rating-info">
                                            <p class="index"><strong class="rating">{{rates}}</strong>out of 5</p>
                                            <div class="rating"><p>{% include 'includes/rating.html' %}</p></div>
                                            <p class="see-all">See all {{all_ratings.count}} reviews</p>
                                           
                                            <ul class="options">
                                                {% for data in ratings %}
                                                {% if data.rating_value == 5.0 %}
                                                <li>
                                                    <div class="detail-for">
                                                        <span class="option-name">5stars</span>
                                                        <span class="progres">
                                                            <span class="line-100percent"><span class="percent" style="width: {{data.count}}%;" ></span></span>
                                                        </span>
                                                        <span class="number">{{data.count}}</span>
                                                    </div>
                                                </li>
                                                {% endif %}
                                                {% endfor %}

                                                {% for data in ratings %}
                                                {% if data.rating_value == 4.0 %}
                                                <li>
                                                    <div class="detail-for">
                                                        <span class="option-name">4stars</span>
                                                        <span class="progres">
                                                            <span class="line-100percent"><span class="percent" style="width: {{data.count}}%;" ></span></span>
                                                        </span>
                                                        <span class="number">{{data.count}}</span>
                                                    </div>
                                                </li>
                                                {% endif %}
                                                {% endfor %}

                                                {% for data in ratings %}
                                                {% if data.rating_value == 3.0 %}
                                                <li>
                                                    <div class="detail-for">
                                                        <span class="option-name">3stars</span>
                                                        <span class="progres">
                                                            <span class="line-100percent"><span class="percent" style="width: {{data.count}}%;" ></span></span>
                                                        </span>
                                                        <span class="number">{{data.count}}</span>
                                                    </div>
                                                </li>
                                                {% endif %}
                                                {% endfor %}

                                                {% for data in ratings %}
                                                {% if data.rating_value == 2.0 %}
                                                <li>
                                                    <div class="detail-for">
                                                        <span class="option-name">2stars</span>
                                                        <span class="progres">
                                                            <span class="line-100percent"><span class="percent" style="width: {{data.count}}%;" ></span></span>
                                                        </span>
                                                        <span class="number">{{data.count}}</span>
                                                    </div>
                                                </li>
                                                {% endif %}
                                                {% endfor %}

                                                {% for data in ratings %}
                                                {% if data.rating_value == 1.0 %}
                                                <li>
                                                    <div class="detail-for">
                                                        <span class="option-name">1stars</span>
                                                        <span class="progres">
                                                            <span class="line-100percent"><span class="percent" style="width: {{data.count}}%;" ></span></span>
                                                        </span>
                                                        <span class="number">{{data.count}}</span>
                                                    </div>
                                                </li>
                                                {% endif %}
                                                {% endfor %}
                                               
                                     
                                            </ul>
                                           
                                        </div>
                                    </div>
                                    <div class="col-lg-7 col-md-7 col-sm-6 col-xs-12">
                                        <div class="review-form-wrapper">
                                            <span class="title">Submit your review</span>
                                            <form id="review-form" name="frm-review" method="post">
                                                <div class="comment-form-rating">
                                                    <label>1. Your rating of this products:</label>
                                                    <p class="stars">
                                                        <fieldset class="rating">
                                                            <input class="ratings" id="demo-1" type="radio" name="rating" value="1"> 
                                                            <label for="demo-1">1 star</label>
                                                            <input class="ratings" id="demo-2" type="radio" name="rating" value="2">
                                                            <label for="demo-2">2 stars</label>
                                                            <input class="ratings" id="demo-3" type="radio" name="rating" value="3">
                                                            <label for="demo-3">3 stars</label>
                                                            <input class="ratings" id="demo-4" type="radio" name="rating" value="4">
                                                            <label for="demo-4">4 stars</label>
                                                            <input class="ratings" id="demo-5" type="radio" name="rating" value="5">
                                                            <label for="demo-5">5 stars</label>
                                                            
                                                            <div class="stars">
                                                                <label for="demo-1" aria-label="1 star" title="1 star"></label>
                                                                <label for="demo-2" aria-label="2 stars" title="2 stars"></label>
                                                                <label for="demo-3" aria-label="3 stars" title="3 stars"></label>
                                                                <label for="demo-4" aria-label="4 stars" title="4 stars"></label>
                                                                <label for="demo-5" aria-label="5 stars" title="5 stars"></label>   
                                                            </div>
                                                            
                                                        </fieldset>
                                                        <!-- <span>
                                                            <a class="btn-rating" data-value="star-1" href="#"> <input id="demo-1" type="hidden" name="ratings" value="1"> <i class="fa fa-star-o" aria-hidden="true"></i></a>
                                                            <a class="btn-rating" data-value="star-2" href="#"><i class="fa fa-star-o" aria-hidden="true"></i></a>
                                                            <a class="btn-rating" data-value="star-3" href="#"><i class="fa fa-star-o" aria-hidden="true"></i></a>
                                                            <a class="btn-rating" data-value="star-4" href="#"><i class="fa fa-star-o" aria-hidden="true"></i></a>
                                                            <a class="btn-rating" data-value="star-5" href="#"><i class="fa fa-star-o" aria-hidden="true"></i></a>
                                                        </span> -->
                                                    </p>
                                                </div>
                                                <!-- <p class="form-row wide-half">
                                                    <input type="text" name="name" value="" placeholder="Your name">
                                                </p>
                                                <p class="form-row wide-half">
                                                    <input type="email" name="email" value="" placeholder="Email address">
                                                </p> -->
                                                <p class="form-row">
                                                    <textarea name="comment" id="comment" cols="30" rows="10" placeholder="Write your review here..."></textarea>
                                                </p>
                                                <input type="hidden" value="{{data.id}}" id="p_id" >
                                                <p class="form-row">
                                                    <button type="submit" name="submit">
                                                        submit review
                                                        <img id="img" style=" display: none; border-radius:20px; height:30px; margin-left: 10px;" src="{% static 'assets/images/afro.gif' %}" alt="">
                                                    </button>
                                                </p>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div id="comments">
                                    <ol class="commentlist">
                                        {% for data in rating_list %}
                                        <li class="review">
                                            <div class="comment-container">
                                                <div class="row">
                                                    <div class="comment-content col-lg-8 col-md-9 col-sm-8 col-xs-12">
                                                        <p class="comment-in"><span class="post-name">{{data.rating_for}}</span><span class="post-date">{{data.rating_date|date:"d/m/Y"}}</span></p>
                                                        <div  class="">{% include 'includes/rating_value.html' %}</div>
                                                        <p class="author">by: <b>{{data.rating_by.username}}</b></p>
                                                        <p class="comment-text">{{data.comments}}</p>
                                                    </div>
                                                    <div class="comment-review-form col-lg-3 col-lg-offset-1 col-md-3 col-sm-4 col-xs-12">
                                                        <span class="title">Was this review helpful?</span>
                                                        <ul class="actions">
                                                            <li><a href="#" class="btn-act like" data-type="like"><i class="fa fa-thumbs-up" aria-hidden="true"></i>Yes (100)</a></li>
                                                            <li><a href="#" class="btn-act hate" data-type="dislike"><i class="fa fa-thumbs-down" aria-hidden="true"></i>No (20)</a></li>
                                                            <li><a href="#" class="btn-act report" data-type="dislike"><i class="fa fa-flag" aria-hidden="true"></i>Report</a></li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                        {% endfor %}
                                    </ol>
                                    <div class="biolife-panigations-block  ">
                                        {% if rating_list.has_other_pages %}
                                            <ul class="pagination">
                                                {% if rating_list.has_previous %}
                                                    <li class="page-item">
                                                        <a class="page-link text-dark" href="?page={{ rating_list.previous_page_number }}" aria-label="Previous">
                                                        <span><i class="fa fa-long-arrow-left" ></i></span>
                                                        </a>
                                                    </li>
                                                {% else %}
                                                <li class="page-item disabled text-center"></li>
                                                {% endif %}
            
                                                {% for i in rating_list.paginator.page_range %}
                                                    {% if rating_list.number == i %}
                                                        <li class="page-item "><a class="page-link  bg-warning text-dark" href="?page={{i}}">{{ i }}</a></li>
                                                    {% else %}
                                                        <li class="page-item"><a class="page-link text-dark" href="?page={{i}}">{{ i }}</a></li>
                                                    {% endif %}
                                                {% endfor %}
            
                                                {% if rating_list.has_next %}
                                                    <li class="page-item">
                                                        <a class="page-link text-dark" href="?page={{ rating_list.next_page_number }}" aria-label="Next">
                                                        <span><i class="fa fa-long-arrow-right" ></i></span>
                                                        </a>
                                                    </li>
                                                {% else %}
                                                <li class="page-item disabled text-center"></li>
                                                {% endif %}
                                            </ul>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- related products -->
                <div class="product-related-box single-layout">
                    <div class="biolife-title-box lg-margin-bottom-26px-im">
                        <span class="biolife-icon icon-organic"></span>
                        <span class="subtitle">All the best item for You</span>
                        <h3 class="main-title">Related Products</h3>
                    </div>
                    <ul class="products-list biolife-carousel nav-center-02 nav-none-on-mobile" data-slick='{"rows":1,"arrows":true,"dots":false,"infinite":false,"speed":400,"slidesMargin":0,"slidesToShow":5, "responsive":[{"breakpoint":1200, "settings":{ "slidesToShow": 4}},{"breakpoint":992, "settings":{ "slidesToShow": 3, "slidesMargin":20 }},{"breakpoint":768, "settings":{ "slidesToShow": 2, "slidesMargin":10}}]}'>
                        {% for data in products %}
                        <li class="product-item">
                            <div class="contain-product layout-default">
                                <div class="product-thumb">
                                    <a href="{% url 'details' data.id %}" class="link-to-product">
                                        <img src="{{data.image.url}}" alt="dd" width="270" height="270" class="product-thumnail">
                                    </a>
                                </div>
                                <div class="info">
                                    <!-- <b class="categories">Fresh Fruit</b> -->
                                <h4 class="product-title"><a href="{% url 'details' data.id %}" class="pr-name">{{data.product.title}}</a></h4>
                                    <div class="price">
                                        {% if data.discount_price %}
                                            <ins><span class="price-amount"><span class="currencySymbol">Tsh</span> {{ data.price }}</span></ins>
                                            <del><span class="price-amount"><span class="currencySymbol">Tsh</span> {{ data.discount_price }}</span></del>
                                        {% else %}
                                            <ins><span class="price-amount"><span class="currencySymbol">Tsh</span> {{ data.price }}</span></ins>
                                        {% endif %}
                                    </div>
                                    <div class="slide-down-box">
                                        <p class="message">{{data.details}}</p>
                                        <div class="buttons">
                                            {% if user.is_authenticated %}
                                            <form method="post" action="{% url 'add_to_cart' %}" >
                                                {% csrf_token %}
                                                <button id="add" value="{{data.id}}" style="background-color: #fc9003; width: 100%;" type="submit" class="btn add-to-cart-btn btn-bold">add to cart</button>
                                            </form>
                                            {% else %}
                                            <button style="background-color: #fc9003; width: 100%;" type="submit" class="btn add-to-cart-btn2 add-to-cart-btn btn-bold">add to cart</button>
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                
            </div>
        </div>
    </div>

{% endblock contents %}
